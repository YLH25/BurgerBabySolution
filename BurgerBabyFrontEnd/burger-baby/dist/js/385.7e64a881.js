"use strict";(self["webpackChunkburger_baby"]=self["webpackChunkburger_baby"]||[]).push([[385],{7385:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var i=a(6768),s=a(4232);const r={style:{"min-height":"calc( 100vh - 16em )"}},n={class:"album py-4"},l={class:"container-fluid"},g={id:"imgcontainer",class:"row row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3"},o={class:"card shadow-sm"},d=["src","onClick"],c={class:"card-body"},u=["textContent"],p={style:{height:"2em"},class:"card-text"},h={class:"d-flex justify-content-between align-items-center"},m={class:"btn-group"},S=["id"],k={class:"text-body-secondary"},y={style:{width:"100%",display:"flex"}},v={style:{flex:"1","justify-content":"center"}};function z(e,t,a,z,b,x){const f=(0,i.g2)("router-link"),I=(0,i.g2)("PageRow"),$=(0,i.g2)("router-view"),P=(0,i.g2)("ZoomView");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",r,[(0,i.Lk)("div",n,[(0,i.Lk)("div",l,[(0,i.Lk)("div",g,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(b.data.items,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"col",key:t},[(0,i.Lk)("div",o,[(0,i.Lk)("img",{class:"cardImg",style:{objectFit:"cover",height:"24em"},src:x.getCover(e)??"",onClick:t=>x.showImg(x.getCover(e)??"")},null,8,d),(0,i.Lk)("div",c,[(0,i.Lk)("b",{style:{"font-size":"1.5em"},textContent:(0,s.v_)(e.name),class:"ProductName"},null,8,u),(0,i.Lk)("p",p,(0,s.v_)((e.intro??"").substring(0,40))+(0,s.v_)(e.intro&&e.intro.length>20?"...":""),1),(0,i.Lk)("div",h,[(0,i.Lk)("div",m,[(0,i.bF)(f,{to:`/Product/${e.id}`},{default:(0,i.k6)((()=>[(0,i.Lk)("button",{id:e.id,type:"button",class:"btn btn-sm btn-outline-secondary"}," 商品詳情 ",8,S)])),_:2},1032,["to"])]),(0,i.Lk)("small",k,(0,s.v_)("$"+e.price),1)])])])])))),128))])])])]),(0,i.Lk)("div",y,[(0,i.Lk)("div",v,[(0,i.bF)(I,{searchString:b.searchString,pageSize:b.pageSize,pageIndex:b.pageIndex,data:b.data,onPageSizeChanged:x.pageSizeChanged},null,8,["searchString","pageSize","pageIndex","data","onPageSizeChanged"]),(0,i.bF)($)])]),(0,i.bF)(P,{imgUrl:b.imgUrl,zoomVisible:b.zoomVisible,onHideZoomView:t[0]||(t[0]=e=>x.hideZoom())},null,8,["imgUrl","zoomVisible"])])}a(8992),a(2577);var b=a(7465),x=a(5130);const f={style:{display:"flex","justify-content":"center","align-items":"center"}},I={class:"p-5"},$={style:{display:"flex","flex-direction":"row"}},P={key:0,class:"pagination justify-content-center"},C={key:0,class:"page-item disabled"},w={key:1,class:"page-item"},L={key:2,class:"page-item disabled"},X={key:3,class:"page-item"},_={key:1,style:{"font-size":"1rem",height:"2.5rem"},id:"pageIndexInput",type:"text",placeholder:"跳轉至"},E=["value"];function q(e,t,a,r,n,l){const g=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("div",I,[(0,i.Lk)("div",$,[a.data.totalPages&&a.data.totalPages>1?((0,i.uX)(),(0,i.CE)("ul",P,[1==a.pageIndex&&a.data.totalPages&&a.data.totalPages>1?((0,i.uX)(),(0,i.CE)("li",C,t[1]||(t[1]=[(0,i.Lk)("a",{class:"page-link",href:"#"},"上一頁",-1)]))):(0,i.Q3)("",!0),a.pageIndex>1&&a.data.totalPages>1?((0,i.uX)(),(0,i.CE)("li",w,[(0,i.bF)(g,{class:"page-link",to:`/Products?searchString=${a.searchString}&pageIndex=${a.pageIndex-1}&pageSize=${a.pageSize}`},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("上一頁")]))),_:1},8,["to"])])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.data.pagesStringList,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:(0,s.C4)(["page-item",{active:e==a.pageIndex}])},["1.."==e?((0,i.uX)(),(0,i.Wv)(g,{key:0,class:"page-link",to:`/Products?searchString=${a.searchString}&pageIndex=1&pageSize=${a.pageSize}`},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e),1)])),_:2},1032,["to"])):e==`..${a.data.totalPages}`?((0,i.uX)(),(0,i.Wv)(g,{key:1,class:"page-link",to:`/Products?searchString=${a.searchString}&pageIndex=${a.data.totalPages}&pageSize=${a.pageSize}`},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e),1)])),_:2},1032,["to"])):((0,i.uX)(),(0,i.Wv)(g,{key:2,class:"page-link",to:`/Products?searchString=${a.searchString}&pageIndex=${e}&pageSize=${a.pageSize}`},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e),1)])),_:2},1032,["to"]))],2)))),128)),a.data.totalPages&&a.pageIndex==a.data.totalPages&&a.data.totalPages>1?((0,i.uX)(),(0,i.CE)("li",L,t[3]||(t[3]=[(0,i.Lk)("a",{class:"page-link",href:"#"},"下一頁",-1)]))):(0,i.Q3)("",!0),a.data.totalPages&&a.pageIndex<a.data.totalPages&&a.data.totalPages>1?((0,i.uX)(),(0,i.CE)("li",X,[(0,i.bF)(g,{class:"page-link",to:`/Products?searchString=${a.searchString}&pageIndex=${a.pageIndex+1}&pageSize=${a.pageSize}`},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)("下一頁")]))),_:1},8,["to"])])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),a.data.totalPages&&a.data.totalPages>1?((0,i.uX)(),(0,i.CE)("input",_)):(0,i.Q3)("",!0),(0,i.bo)((0,i.Lk)("select",{style:{"font-size":"1rem",height:"2.5rem"},"onUpdate:modelValue":t[0]||(t[0]=e=>n.localPageSize=e),name:"",id:""},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.pageSizeOptions,((e,t)=>((0,i.uX)(),(0,i.CE)("option",{value:e,key:t},(0,s.v_)("單頁商品顯示數量:"+e),9,E)))),128))],512),[[x.u1,n.localPageSize]])])])])}var F={name:"PageRow",props:{searchString:{type:String,default:""},pageSize:{type:Number,default:1},pageIndex:{type:Number,default:1},data:{type:Object}},data(){return{localPageSize:this.$route.query.pageSize??1,pageSizeOptions:[1,2,5,10,100]}},watch:{localPageSize(e){this.$emit("page-size-changed",e)}}},V=a(1241);const U=(0,V.A)(F,[["render",q]]);var W=U,j=a(4373),N={components:{PageRow:W,ZoomView:b.A},data(){return{zoomVisible:!1,imgUrl:"",searchString:"",pageSize:1,pageIndex:1,data:{totalPages:0,items:[{id:null,name:"",price:0,imgs:[{id:null,productId:null,imgName:null,saveName:null,path:null,isCover:!1,product:null}],intro:null}],pagesStringList:[]}}},methods:{getData(){var e=`${this.$store.state.apiUrl}/Products`;this.$route.query.searchString?this.searchString=this.$route.query.searchString:this.searchString="",this.$route.query.pageSize?this.pageSize=parseInt(this.$route.query.pageSize):this.pageSize=1,this.$route.query.pageIndex?this.pageIndex=parseInt(this.$route.query.pageIndex):this.pageIndex=1,j.A.get(e,{params:{searchString:this.searchString,pageSize:this.pageSize,pageIndex:this.pageIndex}}).then((e=>{this.data=e.data})).catch((e=>{alert(e.toString())}))},getCover(e){if(e&&e.imgs&&e.imgs.length>0){const t=e.imgs.find((e=>!0===e.isCover));if(t)return`${this.$store.state.apiUrl}/${t.saveName}`}return""},pageSizeChanged(e){this.$router.replace({path:this.$router.path,query:{searchString:this.$route.query.searchString??"",pageIndex:1,pageSize:e}})},showImg(e){this.imgUrl=e,this.zoomVisible=!0},hideZoom(){this.zoomVisible=!1}},computed:{},watch:{"$route.query"(){this.getData()}},updated(){},mounted(){this.getData()}};const Q=(0,V.A)(N,[["render",z]]);var Z=Q}}]);
//# sourceMappingURL=385.7e64a881.js.map